## 机器学习第二次作业

```python
def createDataSet():
		dataSet = [[!green!, !collapse!, !clear!, !cloudy!,!yes!],
 		[!black!, !collapse!, !clear!, !boring!,!yes!],
 		[!black!, !collapse!, !clear!, !cloudy!,!yes!],
 		[!green!, !slightly!, !clear!, !cloudy!,!yes!],
 		[!black!, !slightly!, !slightly paste!,!cloudy!, !yes!],
		 [!black!, !slightly!, !slightly paste!,!boring!, !no!],
 		[!green!, !hard!, !clear!, !clear!, !no!],
 		[!light white!, !slightly!, !slightly paste!,!boring!, !no!],
 		[!black!, !slightly!, !clear!, !cloudy!, !no!],
 		[!light white!, !collapse!, !fuzzy!, !cloudy!,!no!],
 		[!green!, !collapse!, !slightly paste!, !boring!,!no!]]
		labels = [!color!, !genti!, !texture!,!knock!]
	return dataSet, labels
```

```python
 import math
			def calcShannonEnt(dataSet):
 					numEntries = len(dataSet)
 					labelCounts = {}
				for featVec in dataSet:
					currentLabel = featVec[-1]
				if currentLabel not in labelCounts.keys():
					labelCounts[currentLabel] = 0 labelCounts[currentLabel] += 1
				shannonEnt = 0.0
				for key in labelCounts:
					 prob = float(labelCounts[key])/numEntries
					 shannonEnt -= prob * math.log(prob, 2)
				return shannonEnt
```

```python
 def splitDataSet(dataSet, index, value):
		retDataSet = []
		for featVec in dataSet:
		if featVec[index] == value:
				reducedFeatVec = featVec[:index] reducedFeatVec.extend(featVec[index + 1:])
		retDataSet.append(reducedFeatVec)
	return retDataSet
```

```python
def chooseBestFeatureToSplit(dataSet):
		numFeatures = len(dataSet[0]) - 1
		baseEntropy = calcShannonEnt(dataSet)
		bestInfoGain, bestFeature = 0.0, -1
		for i in range(numFeatures):
				featList = [example[i] for example in dataSet]
				uniqueVals = set(featList)
				newEntropy = 0.0
		for value in uniqueVals:
			 subDataSet = splitDataSet(dataSet, i, value)
				 prob = len(subDataSet)/float(len(dataSet))
				 newEntropy += prob * calcShannonEnt(subDataSet)
				infoGain = baseEntropy - newEntropy
		print(!infoGain=!, infoGain, !bestFeature=!, i, baseEntropy, newEntropy)
				if (infoGain > bestInfoGain):
						bestInfoGain = infoGain bestFeature = i
		return bestFeature
```

```python
import operator
def majorityCnt(classList):
    classCount = {}
		for vote in classList:
			if vote not in classCount.keys():
				classCount[vote] = 0 classCount[vote] += 1
				sortedClassCount = sorted(classCount.iteritems(), key=operator.itemgetter(1), rever 		return sortedClassCount[0][0]
```

```python
def createTree(dataSet, labels):
		classList = [example[-1] for example in dataSet]
		if classList.count(classList[0]) == len(classList):
		 	return classList[0]
		if len(dataSet[0]) == 1:
			return majorityCnt(classList)
		bestFeat = chooseBestFeatureToSplit(dataSet)
		bestFeatLabel = labels[bestFeat]
		myTree = {bestFeatLabel: {}}

    
    
del(labels[bestFeat])
		featValues = [example[bestFeat] for example in dataSet] uniqueVals = set(featValues) for 			value in uniqueVals:
		subLabels = labels[:]
		myTree[bestFeatLabel][value] = createTree(splitDataSet(dataSet, bestFeat, value return 			return myTree
```

```python
dataSet, labels = createDataSet()
myTree = createTree(dataSet, labels)
```

**运行结果为**

infoGain= 0.18905266854301617 bestFeature= 0 0.9940302114769565 0.8049775429339403
infoGain= 0.11134785288180327 bestFeature= 1 0.9940302114769565 0.8826823585951532
infoGain= 0.19813134764391394 bestFeature= 2 0.9940302114769565 0.7958988638330425
infoGain= 0.19813134764391394 bestFeature= 3 0.9940302114769565 0.7958988638330425
infoGain= 0.0 bestFeature= 0 0.9182958340544896 0.9182958340544896
infoGain= 0.5849625007211563 bestFeature= 1 0.9182958340544896 0.3333333333333333
infoGain= 0.37744375108173434 bestFeature= 2 0.9182958340544896 0.5408520829727552
infoGain= 1.0 bestFeature= 0 1.0 0.0 infoGain= 0.0 bestFeature= 1 1.0 1.0
infoGain= 0.31127812445913283 bestFeature= 0 0.8112781244591328 0.5
infoGain= 0.12255624891826566 bestFeature= 1 0.8112781244591328 0.6887218755408672
infoGain= 0.8112781244591328 bestFeature= 2 0.8112781244591328 0.0



## 第二题

![image-20191112145433838](/Users/xian/Library/Application Support/typora-user-images/image-20191112145433838.png)

### 第三题

![image-20191112145457763](/Users/xian/Library/Application Support/typora-user-images/image-20191112145457763.png)